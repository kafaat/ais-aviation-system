{
  "version": "5",
  "dialect": "mysql",
  "id": "8ed08e3e-6078-4c25-bc47-d2c72ff88864",
  "prevId": "de9d57e3-ac64-4b4f-9b04-a86c163798d9",
  "tables": {
    "airlines": {
      "name": "airlines",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "code": {
          "name": "code",
          "type": "varchar(3)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "country": {
          "name": "country",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "logo": {
          "name": "logo",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "active": {
          "name": "active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "airlines_id": {
          "name": "airlines_id",
          "columns": ["id"]
        }
      },
      "uniqueConstraints": {
        "airlines_code_unique": {
          "name": "airlines_code_unique",
          "columns": ["code"]
        }
      },
      "checkConstraint": {}
    },
    "airports": {
      "name": "airports",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "code": {
          "name": "code",
          "type": "varchar(3)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "city": {
          "name": "city",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "country": {
          "name": "country",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "timezone": {
          "name": "timezone",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "airports_id": {
          "name": "airports_id",
          "columns": ["id"]
        }
      },
      "uniqueConstraints": {
        "airports_code_unique": {
          "name": "airports_code_unique",
          "columns": ["code"]
        }
      },
      "checkConstraint": {}
    },
    "ancillary_services": {
      "name": "ancillary_services",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "code": {
          "name": "code",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "category": {
          "name": "category",
          "type": "enum('baggage','meal','seat','insurance','lounge','priority_boarding')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "price": {
          "name": "price",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "currency": {
          "name": "currency",
          "type": "varchar(3)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'SAR'"
        },
        "available": {
          "name": "available",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "applicableCabinClasses": {
          "name": "applicableCabinClasses",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "applicableAirlines": {
          "name": "applicableAirlines",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "icon": {
          "name": "icon",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        }
      },
      "indexes": {
        "category_idx": {
          "name": "category_idx",
          "columns": ["category"],
          "isUnique": false
        },
        "available_idx": {
          "name": "available_idx",
          "columns": ["available"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "ancillary_services_id": {
          "name": "ancillary_services_id",
          "columns": ["id"]
        }
      },
      "uniqueConstraints": {
        "ancillary_services_code_unique": {
          "name": "ancillary_services_code_unique",
          "columns": ["code"]
        }
      },
      "checkConstraint": {}
    },
    "booking_ancillaries": {
      "name": "booking_ancillaries",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "bookingId": {
          "name": "bookingId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "passengerId": {
          "name": "passengerId",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "ancillaryServiceId": {
          "name": "ancillaryServiceId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "quantity": {
          "name": "quantity",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 1
        },
        "unitPrice": {
          "name": "unitPrice",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "totalPrice": {
          "name": "totalPrice",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "enum('active','cancelled','refunded')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'active'"
        },
        "metadata": {
          "name": "metadata",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        }
      },
      "indexes": {
        "booking_id_idx": {
          "name": "booking_id_idx",
          "columns": ["bookingId"],
          "isUnique": false
        },
        "passenger_id_idx": {
          "name": "passenger_id_idx",
          "columns": ["passengerId"],
          "isUnique": false
        },
        "ancillary_service_id_idx": {
          "name": "ancillary_service_id_idx",
          "columns": ["ancillaryServiceId"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "booking_ancillaries_id": {
          "name": "booking_ancillaries_id",
          "columns": ["id"]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "booking_modifications": {
      "name": "booking_modifications",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "bookingId": {
          "name": "bookingId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "userId": {
          "name": "userId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "modificationType": {
          "name": "modificationType",
          "type": "enum('change_date','upgrade_cabin','change_flight','add_services')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "originalFlightId": {
          "name": "originalFlightId",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "originalCabinClass": {
          "name": "originalCabinClass",
          "type": "enum('economy','business')",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "originalAmount": {
          "name": "originalAmount",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "newFlightId": {
          "name": "newFlightId",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "newCabinClass": {
          "name": "newCabinClass",
          "type": "enum('economy','business')",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "newAmount": {
          "name": "newAmount",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "priceDifference": {
          "name": "priceDifference",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "modificationFee": {
          "name": "modificationFee",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "totalCost": {
          "name": "totalCost",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "enum('pending','approved','rejected','completed')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'pending'"
        },
        "stripePaymentIntentId": {
          "name": "stripePaymentIntentId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "paymentStatus": {
          "name": "paymentStatus",
          "type": "enum('pending','paid','refunded')",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": "'pending'"
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "adminNotes": {
          "name": "adminNotes",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        },
        "completedAt": {
          "name": "completedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "booking_id_idx": {
          "name": "booking_id_idx",
          "columns": ["bookingId"],
          "isUnique": false
        },
        "user_id_idx": {
          "name": "user_id_idx",
          "columns": ["userId"],
          "isUnique": false
        },
        "status_idx": {
          "name": "status_idx",
          "columns": ["status"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "booking_modifications_id": {
          "name": "booking_modifications_id",
          "columns": ["id"]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "bookings": {
      "name": "bookings",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "userId": {
          "name": "userId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "flightId": {
          "name": "flightId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "bookingReference": {
          "name": "bookingReference",
          "type": "varchar(6)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "pnr": {
          "name": "pnr",
          "type": "varchar(6)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "enum('pending','confirmed','cancelled','completed')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'pending'"
        },
        "totalAmount": {
          "name": "totalAmount",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "paymentStatus": {
          "name": "paymentStatus",
          "type": "enum('pending','paid','refunded','failed')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'pending'"
        },
        "stripePaymentIntentId": {
          "name": "stripePaymentIntentId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "stripeCheckoutSessionId": {
          "name": "stripeCheckoutSessionId",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "cabinClass": {
          "name": "cabinClass",
          "type": "enum('economy','business')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "numberOfPassengers": {
          "name": "numberOfPassengers",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "checkedIn": {
          "name": "checkedIn",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        }
      },
      "indexes": {
        "user_id_idx": {
          "name": "user_id_idx",
          "columns": ["userId"],
          "isUnique": false
        },
        "pnr_idx": {
          "name": "pnr_idx",
          "columns": ["pnr"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "bookings_id": {
          "name": "bookings_id",
          "columns": ["id"]
        }
      },
      "uniqueConstraints": {
        "bookings_bookingReference_unique": {
          "name": "bookings_bookingReference_unique",
          "columns": ["bookingReference"]
        },
        "bookings_pnr_unique": {
          "name": "bookings_pnr_unique",
          "columns": ["pnr"]
        }
      },
      "checkConstraint": {}
    },
    "flight_status_history": {
      "name": "flight_status_history",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "flightId": {
          "name": "flightId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "oldStatus": {
          "name": "oldStatus",
          "type": "enum('scheduled','delayed','cancelled','completed')",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "newStatus": {
          "name": "newStatus",
          "type": "enum('scheduled','delayed','cancelled','completed')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "delayMinutes": {
          "name": "delayMinutes",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "changedBy": {
          "name": "changedBy",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "flight_status_history_id": {
          "name": "flight_status_history_id",
          "columns": ["id"]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "flights": {
      "name": "flights",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "flightNumber": {
          "name": "flightNumber",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "airlineId": {
          "name": "airlineId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "originId": {
          "name": "originId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "destinationId": {
          "name": "destinationId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "departureTime": {
          "name": "departureTime",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "arrivalTime": {
          "name": "arrivalTime",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "aircraftType": {
          "name": "aircraftType",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "enum('scheduled','delayed','cancelled','completed')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'scheduled'"
        },
        "economySeats": {
          "name": "economySeats",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "businessSeats": {
          "name": "businessSeats",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "economyPrice": {
          "name": "economyPrice",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "businessPrice": {
          "name": "businessPrice",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "economyAvailable": {
          "name": "economyAvailable",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "businessAvailable": {
          "name": "businessAvailable",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        }
      },
      "indexes": {
        "flight_number_idx": {
          "name": "flight_number_idx",
          "columns": ["flightNumber"],
          "isUnique": false
        },
        "departure_time_idx": {
          "name": "departure_time_idx",
          "columns": ["departureTime"],
          "isUnique": false
        },
        "route_idx": {
          "name": "route_idx",
          "columns": ["originId", "destinationId"],
          "isUnique": false
        },
        "airline_idx": {
          "name": "airline_idx",
          "columns": ["airlineId"],
          "isUnique": false
        },
        "status_idx": {
          "name": "status_idx",
          "columns": ["status"],
          "isUnique": false
        },
        "route_date_status_idx": {
          "name": "route_date_status_idx",
          "columns": ["originId", "destinationId", "departureTime", "status"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "flights_id": {
          "name": "flights_id",
          "columns": ["id"]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "inventory_locks": {
      "name": "inventory_locks",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "flightId": {
          "name": "flightId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "numberOfSeats": {
          "name": "numberOfSeats",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "cabinClass": {
          "name": "cabinClass",
          "type": "enum('economy','business')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "userId": {
          "name": "userId",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "sessionId": {
          "name": "sessionId",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "enum('active','released','expired','converted')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'active'"
        },
        "lockedAt": {
          "name": "lockedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "expiresAt": {
          "name": "expiresAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "releasedAt": {
          "name": "releasedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        }
      },
      "indexes": {
        "flight_id_idx": {
          "name": "flight_id_idx",
          "columns": ["flightId"],
          "isUnique": false
        },
        "session_id_idx": {
          "name": "session_id_idx",
          "columns": ["sessionId"],
          "isUnique": false
        },
        "status_idx": {
          "name": "status_idx",
          "columns": ["status"],
          "isUnique": false
        },
        "expires_at_idx": {
          "name": "expires_at_idx",
          "columns": ["expiresAt"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "inventory_locks_id": {
          "name": "inventory_locks_id",
          "columns": ["id"]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "loyalty_accounts": {
      "name": "loyalty_accounts",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "userId": {
          "name": "userId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "totalMilesEarned": {
          "name": "totalMilesEarned",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "currentMilesBalance": {
          "name": "currentMilesBalance",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "milesRedeemed": {
          "name": "milesRedeemed",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "tier": {
          "name": "tier",
          "type": "enum('bronze','silver','gold','platinum')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'bronze'"
        },
        "tierPoints": {
          "name": "tierPoints",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "memberSince": {
          "name": "memberSince",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "lastActivityAt": {
          "name": "lastActivityAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        }
      },
      "indexes": {
        "user_id_idx": {
          "name": "user_id_idx",
          "columns": ["userId"],
          "isUnique": false
        },
        "tier_idx": {
          "name": "tier_idx",
          "columns": ["tier"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "loyalty_accounts_id": {
          "name": "loyalty_accounts_id",
          "columns": ["id"]
        }
      },
      "uniqueConstraints": {
        "loyalty_accounts_userId_unique": {
          "name": "loyalty_accounts_userId_unique",
          "columns": ["userId"]
        }
      },
      "checkConstraint": {}
    },
    "miles_transactions": {
      "name": "miles_transactions",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "userId": {
          "name": "userId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "loyaltyAccountId": {
          "name": "loyaltyAccountId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "type": {
          "name": "type",
          "type": "enum('earn','redeem','expire','bonus','adjustment')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "amount": {
          "name": "amount",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "balanceAfter": {
          "name": "balanceAfter",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "bookingId": {
          "name": "bookingId",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "flightId": {
          "name": "flightId",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "expiresAt": {
          "name": "expiresAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {
        "user_id_idx": {
          "name": "user_id_idx",
          "columns": ["userId"],
          "isUnique": false
        },
        "loyalty_account_id_idx": {
          "name": "loyalty_account_id_idx",
          "columns": ["loyaltyAccountId"],
          "isUnique": false
        },
        "type_idx": {
          "name": "type_idx",
          "columns": ["type"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "miles_transactions_id": {
          "name": "miles_transactions_id",
          "columns": ["id"]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "passengers": {
      "name": "passengers",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "bookingId": {
          "name": "bookingId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "type": {
          "name": "type",
          "type": "enum('adult','child','infant')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'adult'"
        },
        "title": {
          "name": "title",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "firstName": {
          "name": "firstName",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "lastName": {
          "name": "lastName",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "dateOfBirth": {
          "name": "dateOfBirth",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "passportNumber": {
          "name": "passportNumber",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "nationality": {
          "name": "nationality",
          "type": "varchar(3)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "seatNumber": {
          "name": "seatNumber",
          "type": "varchar(5)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "ticketNumber": {
          "name": "ticketNumber",
          "type": "varchar(13)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {
        "booking_id_idx": {
          "name": "booking_id_idx",
          "columns": ["bookingId"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "passengers_id": {
          "name": "passengers_id",
          "columns": ["id"]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "payments": {
      "name": "payments",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "bookingId": {
          "name": "bookingId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "amount": {
          "name": "amount",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "currency": {
          "name": "currency",
          "type": "varchar(3)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'SAR'"
        },
        "method": {
          "name": "method",
          "type": "enum('card','wallet','bank_transfer')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "enum('pending','completed','failed','refunded')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'pending'"
        },
        "transactionId": {
          "name": "transactionId",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "idempotencyKey": {
          "name": "idempotencyKey",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        }
      },
      "indexes": {
        "booking_id_idx": {
          "name": "booking_id_idx",
          "columns": ["bookingId"],
          "isUnique": false
        },
        "idempotency_key_idx": {
          "name": "idempotency_key_idx",
          "columns": ["idempotencyKey"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "payments_id": {
          "name": "payments_id",
          "columns": ["id"]
        }
      },
      "uniqueConstraints": {
        "payments_idempotencyKey_unique": {
          "name": "payments_idempotencyKey_unique",
          "columns": ["idempotencyKey"]
        }
      },
      "checkConstraint": {}
    },
    "user_preferences": {
      "name": "user_preferences",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "userId": {
          "name": "userId",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "preferredSeatType": {
          "name": "preferredSeatType",
          "type": "enum('window','aisle','middle')",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "preferredCabinClass": {
          "name": "preferredCabinClass",
          "type": "enum('economy','business','first')",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "mealPreference": {
          "name": "mealPreference",
          "type": "enum('regular','vegetarian','vegan','halal','kosher','gluten_free')",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "wheelchairAssistance": {
          "name": "wheelchairAssistance",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": false
        },
        "extraLegroom": {
          "name": "extraLegroom",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": false
        },
        "passportNumber": {
          "name": "passportNumber",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "passportExpiry": {
          "name": "passportExpiry",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "nationality": {
          "name": "nationality",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "phoneNumber": {
          "name": "phoneNumber",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "emergencyContact": {
          "name": "emergencyContact",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "emergencyPhone": {
          "name": "emergencyPhone",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "emailNotifications": {
          "name": "emailNotifications",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": true
        },
        "smsNotifications": {
          "name": "smsNotifications",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false,
          "default": false
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        }
      },
      "indexes": {
        "user_id_idx": {
          "name": "user_id_idx",
          "columns": ["userId"],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "user_preferences_id": {
          "name": "user_preferences_id",
          "columns": ["id"]
        }
      },
      "uniqueConstraints": {
        "user_preferences_userId_unique": {
          "name": "user_preferences_userId_unique",
          "columns": ["userId"]
        }
      },
      "checkConstraint": {}
    },
    "users": {
      "name": "users",
      "columns": {
        "id": {
          "name": "id",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": true
        },
        "openId": {
          "name": "openId",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "email": {
          "name": "email",
          "type": "varchar(320)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "loginMethod": {
          "name": "loginMethod",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "role": {
          "name": "role",
          "type": "enum('user','admin')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'user'"
        },
        "createdAt": {
          "name": "createdAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "updatedAt": {
          "name": "updatedAt",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        },
        "lastSignedIn": {
          "name": "lastSignedIn",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "users_id": {
          "name": "users_id",
          "columns": ["id"]
        }
      },
      "uniqueConstraints": {
        "users_openId_unique": {
          "name": "users_openId_unique",
          "columns": ["openId"]
        }
      },
      "checkConstraint": {}
    }
  },
  "views": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "tables": {},
    "indexes": {}
  }
}
